{% extends 'base.html' %}
{% load i18n %}
{% load myfilter %}
{% block description %}. {{ song.artist }}, {{ song.title }}, {% trans 'songs' %}, {% trans 'chords' %}{% endblock %}
{% block keywords %}, {{ song.artist }}, {{ song.title }}, {% trans 'songs' %}, {% trans 'chords' %}{% endblock %}
{% block title %}{{ song.artist }} - {{ song.title }}, {% trans 'songs' %}, {% trans 'chords' %} - {% endblock %}
{% block pagestyle %}
#id_search { height: 16px; margin-left: 10px; }
.msgcont { line-height: 1.5em; }
.msgcont b { font-weight: 500; color: #5645ad; }
{% endblock %}
{% block songsclass %}wrap{% endblock %}
{% block pagescript %}
<!--google+ comments-->
<script src="https://apis.google.com/js/plusone.js"></script>
<!--/google+ comments-->
{% endblock %}
{% block pageheader %}
{% endblock %}

{% block content %}

<div class="indexlist wrap">
  <a class="hspaced" href="{% url 'songs.views.list_art' %}">{% trans 'Full list' %}</a>
  {% for i, v in art_index.items %}
    <a class="nodecor hspaced" href="{% url 'songs.views.list_art' ind_art=i %}">{{ v|capfirst }}</a>
  {% endfor %}
  <form class="search" action="{% url 'songs.views.list_songs' %}" method="get">{% csrf_token %}
    {{ form }}
    <input class="submit" type="submit" value="{% trans 'Search' %}" />
  </form>
</div>

<p>
  <h2 class="nomarg"><a class="nodecor" href="{% url 'songs.views.list_songs' id_art=song.art_id %}"><span class="hspace">{{ song.artist }} </span></a>{{ song.title }}</h2>
</p>

{% if song.audio %}
<p>
  <table>
  <tr><td align="center" valign="center">
  {% trans 'Listen' %}: &nbsp; 
  </td><td>
    <audio src="{% url 'songs.views.get_song_file' id=song.id %}" controls></audio>
  </td></tr>
  </table>
</p>
{% endif %}

<div class="wrap">
  <div class="msgtext msgcont">{{ song.content|safe }}</div>
</div>

<p class="smaller hspace">{% trans 'Added' %} <a class="nodecor" href="{% url 'songs.views.get_user_profile' id=song.author.id %}">{{ song.author.username }}</a> 
  <acronym title="{{ song.date }}">{{ song.date|time_since }}</acronym> {% trans 'ago' %}</p>
{% if request.user.is_authenticated and request.user.id == song.author.id or request.user.is_superuser %}
  <p class="smaller hspace">
    <a href="{% url 'songs.views.edit_song' id=song.id %}">{% trans 'Edit' %}</a>
    <a class="hspace2" href="{% url 'songs.views.delete_song' id=song.id %}">{% trans 'Delete' %}</a>
    <a class="hspace" href="{% url 'songs.views.edit_song_file' id=song.id %}">{% trans 'Audio' %}</a>
  </p>
{% endif %}

<!--google+ comments-->
<div id="comments"></div>
<script>
gapi.comments.render('comments', {
    href: window.location,
    width: '640',
    first_party_property: 'BLOGGER',
    view_type: 'FILTERED_POSTMOD'
});
</script>
<!--/google+ comments-->

{% endblock %}
