{% extends 'base.html' %}
{% load i18n %}
{% block description %}, {% trans 'photos' %}{% endblock %}
{% block keywords %}, {% trans 'photos' %}{% endblock %}
{% block title %}{% trans 'Photos' %} - {% endblock %}
{% block pagestyle %}
#topmenu li.photomenu { background-color: #cd984c; }
#viewcont { position: fixed; left:0; top:0; height: 100%; width: 100%; }
#viewphoto { max-width:805px; background-color: #a07443; }
#viewheader { height: 1.5em; }
#closebtn { background-color: #cd984c; }
#removebtn { margin-left: -20px; margin-top: 1.5em; background-color: #a07443; color: #f2866b; }
#viewfooter { text-align:left; }
.inbar { margin: 1px 5px; padding: 1px 8px; }
.outbar { padding: 8px; }
table.plist td { vertical-align: center; }
td.nav { width: 18px; }
{% endblock %}
{% block pageheader %}{% trans 'Photos' %}{% endblock %}
{% block content %}
<p>Подборка разных фотографий о природе, местах, людях. Смотрите, добавляйте свои работы.</p>
{% if photos.object_list %}
  <table class="plist smaller"><tr>
  <td class="nav">
  {% if photos.has_previous %}
    <a class="nodecor" href="{% url my.views.list_photos %}?page={{ photos.previous_page_number }}"><img src='/media/img/s_prev.png' title="{% trans 'previous' %}" alt="{% trans 'previous' %}"></span></a>
  {% endif %}
  </td>
  {% for photo in photos.object_list %}
    <td><a class="nodecor" href="{% url my.views.list_photos id=photo.id %}?page={{ photos.number }}"><img src="{{ photo.thumb_url }}=s128" title="{{ photo.title }}" alt="{{ photo.title }}"/></a></td>
  {% endfor %}
  <td class="nav">
  {% if photos.has_next %}
    <a class="nodecor" href="{% url my.views.list_photos %}?page={{ photos.next_page_number }}"><img src='/media/img/s_next.png' title="{% trans 'next' %}" alt="{% trans 'next' %}"></span></a>
  {% endif %}
  </td>
  </tr></table>
{% else %}
  <p>{% trans 'No photos' %}.</p>
{% endif %}
{% if user.is_authenticated %}
  <p class="smaller"><a href="{% url my.views.add_photo %}">{% trans 'Add photo' %}</a></p>
{% else %}
  <p class="smaller">{% trans 'Please authorize to upload photos' %}.</p>
{% endif %}
{% for photo in view %}
  <table id="viewcont">
  <tr><td align="center" valign="center">
    <div id="viewphoto" class="wrap white">
      <div id="viewheader">
        <a class="nodecor" href="#" onclick="document.getElementById('viewcont').style.display='none';" title="{% trans 'Close' %}">
          <div id="closebtn" class="smaller inbar rfloat"><b>x</b></div>
        </a>
        {% if user.is_authenticated and user.id == photo.author.id %}
         <a href="{% url my.views.delete_photo id=photo.id %}" title="{% trans 'Delete' %}">
           <div id="removebtn" class="wrap smaller outbar lfloat"><b>x</b></div>
         </a>
        {% endif %}
        <div class="smaller inbar lfloat">
          <a class="nodecor" href="" title="{% trans 'Title' %}">{{ photo.title }}</a> | 
          {% if photo.album %}<a class="nodecor" href="" title="{% trans 'Album' %}">{{ photo.album }}</a>{% endif %}
        </div>
      </div>
      <div id="viewcontent">
        <a class="nodecor" href="{% url my.views.get_photo id=photo.id %}" target="_blank">
          <img src="{{ photo.thumb_url }}=s800" title="{% trans 'Click to view full size' %}" alt="{{ v.title }}" />
        </a>
      </div>
    </div>
  </div>
  </td></tr>
  </table>
{% endfor %}
{% endblock %}
